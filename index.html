<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<title>Pyramide van de Duivelüî•üëπ - Nieuwe Wiskunde</title>
<style>
body {
    font-family: 'Arial', sans-serif; color: #f1f1f1; text-align: center; padding: 20px; background: linear-gradient(135deg, #1e1e1e, #3c0a0a);
}
h1, h2, h3 { font-family: 'Impact', sans-serif; color: #ff4747; text-shadow: 2px 2px 6px black; }
h1 { font-size: 48px; margin-bottom: 10px; }
h2 { margin-top: 0; }
.room { display: none; background: rgba(0,0,0,0.85); padding: 20px; margin: 20px auto; max-width: 700px; border-radius: 12px; border: 2px solid #ff4747; text-align: left; }
input, textarea { padding: 6px; font-size: 16px; background: #2e1f30; color: #fff; border: 1px solid #ff4747; border-radius: 5px; }
input { width: 90px; }
button { padding: 10px 22px; margin: 8px; cursor: pointer; font-size: 16px; background: #ff4747; border: 1px solid #fff; border-radius: 6px; color: white; }
button:hover { background: #ff1e1e; }
.success { color: #22c55e; font-size: 28px; font-weight: bold; text-shadow: 2px 2px 8px black; }
table { margin: 15px auto; border-collapse: collapse; color: white; }
th, td { border: 1px solid #ff4747; padding: 10px 15px; min-width: 50px; text-align: center; }
td[contenteditable="true"] { background: #3a1a1a; outline: none; cursor: text; }
.formula-input { width: 160px; }

/* Story popup */
#storyPopup {
    display:none;
    position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
    background: rgba(0,0,0,0.95); padding:25px;
    border:2px solid #ff4747; border-radius:12px; max-width:700px; color:#f1f1f1; text-align:left; z-index:1000;
}
#storyPopup h2{text-align:center;}
#storyPopup p{line-height:1.6;}
#closeStory{display:block;margin:15px auto 0;padding:8px 20px;background:#ff4747;color:white;border:none;border-radius:6px;cursor:pointer;}
</style>
</head>
<body>

<div id="home">
<h1>Pyramide van de Duivelüî•üëπ</h1>
<p><b>Los alle escape rooms op en verzamel de cijfers om te ontsnappen!</b></p>

<button onclick="openStory()">Verhaal</button>

<button onclick="openRoom(1)">Escape Room 1 ‚Äì Lineaire Puzzels</button>
<button onclick="openRoom(2)">Escape Room 2 ‚Äì Breuken en Verhoudingen</button>
<button onclick="openRoom(3)">Escape Room 3 ‚Äì Omrekeningen & Tabellen</button>
<button onclick="openRoom(4)">Escape Room 4 ‚Äì Kortingen en Procenten</button>
<button onclick="openRoom(5)">Escape Room 5 ‚Äì Procenten Berekeningen</button>
<button onclick="openRoom(6)">Escape Room 6 ‚Äì Groei Tabellen</button>
<button onclick="openRoom(7)">Escape Room 7 ‚Äì Exponenten & Wortels</button>

<h3>üî¢ Eindcode</h3>
<input id="finalCode" maxlength="7" placeholder="code" />
<br>
<button onclick="checkFinal()">Check code</button>
<p id="victory"></p>
</div>

<!-- Story Popup -->
<div id="storyPopup">
<h2>Het Verhaal van de Pyramide van de Duivel</h2>
<p>
Diep in de woestijn staat een oude piramide, gehuld in duisternis en mysterie. Niemand durft binnen te gaan, want de legende zegt dat wie de piramide betreedt nooit meer terugkeert‚Ä¶ tenzij je de geheimen kunt ontsluiten.
</p>
<p>
Jij bent de dappere avonturier die de uitdaging aandurft. Elke kamer bevat puzzels, raadsels en wiskundige uitdagingen. Alleen wie slim rekent en goed oplet, verzamelt de cijfers die nodig zijn om de eindcode te kraken en te ontsnappen.
</p>
<p>
De muren fluisteren, de lucht is zwaar en de tijd dringt. Kun jij de Pyramide van de Duivel overleven en als winnaar uit de piramide komen?
</p>
<button id="closeStory" onclick="closeStory()">Sluit Verhaal</button>
</div>

<!-- Escape Room 1 -->
<div class="room" id="room1">
<h2>Escape Room 1 ‚Äì Lineaire Puzzels</h2>
<p>1) 4x + 7 = 31 ‚Üí x = <input id="r1q1" /></p>
<p>2) 5x - 9 = 16 ‚Üí x = <input id="r1q2" /></p>
<p>3) x/3 + 5 = 9 ‚Üí x = <input id="r1q3" /></p>
<p>4) 7x = 56 ‚Üí x = <input id="r1q4" /></p>
<p>5) 3x + 2 = 17 ‚Üí x = <input id="r1q5" /></p>
<button onclick="checkRoom1()">Check</button>
<p id="r1result"></p>
<button onclick="goHome()">Terug</button>
</div>

<!-- Escape Room 2 -->
<div class="room" id="room2">
<h2>Escape Room 2 ‚Äì Breuken en Verhoudingen</h2>
<p>1) 2/3 + 1/6 = <input id="r2q1" /></p>
<p>2) 5/8 ‚àí 1/4 = <input id="r2q2" /></p>
<p>3) 3/5 √ó 10 = <input id="r2q3" /></p>
<p>4) (2/3) √∑ (1/6) = <input id="r2q4" /></p>
<button onclick="checkRoom2()">Check</button>
<p id="r2result"></p>
<button onclick="goHome()">Terug</button>
</div>

<!-- Escape Room 3 -->
<div class="room" id="room3">
<h2>Escape Room 3 ‚Äì Omrekeningen & Tabellen</h2>
<p>Vul de juiste waarden in de tabel (de rijen zijn gekoppeld):</p>
<table>
<tr><th>Lengte (m)</th><td contenteditable="true" id="tbl_r3_1"></td><td contenteditable="true" id="tbl_r3_2"></td><td contenteditable="true" id="tbl_r3_3"></td><td contenteditable="true" id="tbl_r3_4"></td></tr>
<tr><th>Lengte (cm)</th><td contenteditable="true" id="tbl_r3_5"></td><td contenteditable="true" id="tbl_r3_6"></td><td contenteditable="true" id="tbl_r3_7"></td><td contenteditable="true" id="tbl_r3_8"></td></tr>
</table>
<p>Wat is de formule om van meter naar centimeter te gaan? Vul hier in:</p>
<input type="text" id="r3_formula" class="formula-input" placeholder="bijv. x * 100" /><br><br>
<button onclick="checkRoom3()">Check</button>
<p id="r3result"></p>
<button onclick="goHome()">Terug</button>
</div>

<!-- Escape Room 4 -->
<div class="room" id="room4">
<h2>Escape Room 4 ‚Äì Kortingen en Procenten</h2>
<p>1) ‚Ç¨80 met 25% korting ‚Üí <input id="r4q1" /> ‚Ç¨</p>
<p>2) ‚Ç¨150 met 10% korting ‚Üí <input id="r4q2" /> ‚Ç¨</p>
<p>3) ‚Ç¨200 met 40% korting ‚Üí <input id="r4q3" /> ‚Ç¨</p>
<p>4) ‚Ç¨100 met 15% korting ‚Üí <input id="r4q4" /> ‚Ç¨</p>
<button onclick="checkRoom4()">Check</button>
<p id="r4result"></p>
<button onclick="goHome()">Terug</button>
</div>

<!-- Escape Room 5 -->
<div class="room" id="room5">
<h2>Escape Room 5 ‚Äì Procenten Berekeningen</h2>
<p>1) 20% van 120 = <input id="r5q1" /> ‚Ç¨</p>
<p>2) 35% korting op ‚Ç¨180 = <input id="r5q2" /> ‚Ç¨</p>
<p>3) 50% van 90 = <input id="r5q3" /> ‚Ç¨</p>
<button onclick="checkRoom5()">Check</button>
<p id="r5result"></p>
<button onclick="goHome()">Terug</button>
</div>

<!-- Escape Room 6 -->
<div class="room" id="room6">
<h2>Escape Room 6 ‚Äì Groei Tabellen</h2>
<p>Vul de tabel in. De getallen groeien volgens de pijlen √ó2, √ó3, √ó2.</p>
<table>
<tr><th>Gewicht (kg)</th><td contenteditable="true" id="tbl_r6_1"></td><td contenteditable="true" id="tbl_r6_2"></td><td contenteditable="true" id="tbl_r6_3"></td><td contenteditable="true" id="tbl_r6_4"></td></tr>
<tr><th>Bedrag (‚Ç¨)</th><td contenteditable="true" id="tbl_r6_5"></td><td contenteditable="true" id="tbl_r6_6"></td><td contenteditable="true" id="tbl_r6_7"></td><td contenteditable="true" id="tbl_r6_8"></td></tr>
</table>
<p>Formule: Bedrag = <input type="text" id="r6_formula" class="formula-input" placeholder="bijv. 2x + 1" /></p>
<button onclick="checkRoom6()">Check</button>
<p id="r6result"></p>
<button onclick="goHome()">Terug</button>
</div>

<!-- Escape Room 7 -->
<div class="room" id="room7">
<h2>Escape Room 7 ‚Äì Exponenten & Wortels</h2>
<p>1) Wat is 4¬≥?</p><input id="r7q1" />
<p>2) Wat is ‚àö64?</p><input id="r7q2" />
<p>3) Wat is 2‚Åµ?</p><input id="r7q3" />
<p>4) Wat is de uitkomst van 3 √ó (2¬≤)?</p><input id="r7q4" />
<p>5) Wat is ‚àö(9 + 16)?</p><input id="r7q5" />
<button onclick="checkRoom7()">Check</button>
<p id="r7result"></p>
<button onclick="goHome()">Terug</button>
</div>

<script>
// Eindcode
const correctCode="4816937";

// Rooms open/close
function openRoom(n){
    document.getElementById("home").style.display="none";
    for(let i=1;i<=7;i++){document.getElementById("room"+i).style.display="none";}
    document.getElementById("room"+n).style.display="block";
    clearResults();
}
function goHome(){ location.reload(); }
function clearResults(){ for(let i=1;i<=7;i++){ const res=document.getElementById("r"+i+"result"); if(res) res.innerText=""; } }

// Verhaal
function openStory(){ document.getElementById("storyPopup").style.display="block"; }
function closeStory(){ document.getElementById("storyPopup").style.display="none"; }

// Room 1
function checkRoom1(){ const answers=[6,5,12,8,5]; for(let i=1;i<=5;i++){ if(parseFloat(document.getElementById("r1q"+i).value)!==answers[i-1]){document.getElementById("r1result").innerText="‚ùå Probeer opnieuw"; return;} } document.getElementById("r1result").innerHTML="‚úÖ Jouw cijfer: <b>4</b>"; }

// Room 2
function checkRoom2(){ const answers=[0.8333,0.375,6,4]; for(let i=1;i<=4;i++){ let val=parseFloat(document.getElementById("r2q"+i).value); if(i<3 && Math.abs(val-answers[i-1])>0.01 || i>=3 && val!==answers[i-1]){document.getElementById("r2result").innerText="‚ùå Probeer opnieuw"; return;} } document.getElementById("r2result").innerHTML="‚úÖ Jouw cijfer: <b>8</b>"; }

// Room 3
function checkRoom3(){
    const meters=[], centimeters=[];
    for(let i=1;i<=4;i++){ meters.push(parseFloat(document.getElementById("tbl_r3_"+i).innerText.replace(',','.'))); centimeters.push(parseFloat(document.getElementById("tbl_r3_"+(i+4)).innerText.replace(',','.'))); }
    for(let i=0;i<4;i++){ if(isNaN(meters[i])||isNaN(centimeters[i])||Math.abs(centimeters[i]-meters[i]*100)>0.01){document.getElementById("r3result").innerText="‚ùå Controleer je tabel"; return;}}
    const formula=document.getElementById("r3_formula").value.replace(/\s/g,'').toLowerCase();
    if(!["x*100","x√ó100","x100"].includes(formula)){document.getElementById("r3result").innerText="‚ùå Formule klopt niet"; return;}
    document.getElementById("r3result").innerHTML="‚úÖ Jouw cijfer: <b>1</b>";
}

// Room 4
function checkRoom4(){ const answers=[60,135,120,85]; for(let i=1;i<=4;i++){ if(Math.abs(parseFloat(document.getElementById("r4q"+i).value)-answers[i-1])>0.1){document.getElementById("r4result").innerText="‚ùå Probeer opnieuw"; return;} } document.getElementById("r4result").innerHTML="‚úÖ Jouw cijfer: <b>9</b>"; }

// Room 5
function checkRoom5(){ const answers=[24,117,45]; for(let i=1;i<=3;i++){ if(Math.abs(parseFloat(document.getElementById("r5q"+i).value)-answers[i-1])>0.1){document.getElementById("r5result").innerText="‚ùå Probeer opnieuw"; return;} } document.getElementById("r5result").innerHTML="‚úÖ Jouw cijfer: <b>6</b>"; }

// Room 6
function checkRoom6(){ const weights=[2,4,12,24], amounts=[1,2,6,12]; for(let i=1;i<=4;i++){ if(parseFloat(document.getElementById("tbl_r6_"+i).innerText)!=weights[i-1]||parseFloat(document.getElementById("tbl_r6_"+(i+4)).innerText)!=amounts[i-1]){document.getElementById("r6result").innerText="‚ùå Controleer tabel"; return;} } document.getElementById("r6result").innerHTML="‚úÖ Jouw cijfer: <b>7</b>"; }

// Room 7
function checkRoom7(){ const answers=[64,8,32,12,5]; for(let i=1;i<=5;i++){ if(parseFloat(document.getElementById("r7q"+i).value)!=answers[i-1]){document.getElementById("r7result").innerText="‚ùå Probeer opnieuw"; return;} } document.getElementById("r7result").innerHTML="‚úÖ Jouw cijfer: <b>7</b>"; }

// Eindcode
function checkFinal(){ if(document.getElementById("finalCode").value===correctCode){document.getElementById("victory").innerText="üéâ Ontsnapt!";} else{document.getElementById("victory").innerText="‚ùå Foute code";}}
</script>

</body>
</html>
